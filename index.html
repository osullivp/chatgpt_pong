<!DOCTYPE html>
<html>

<head>
    <title>Pong</title>
    <style>
        body {
            background-color: black;
        }

        canvas {
            width: 600px;
            height: 400px;
        }
    </style>
</head>

<body>
    <canvas id="canvas" width="600" height="400" style="border: 1px solid white;"></canvas>
    <script>
        const PADDLE_STOPPED = 0;
        const PADDLE_UP = 1;
        const PADDLE_DOWN = 2;
        
        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext("2d");
        var MAX_ANGLE = 1.047; // 60 degrees in radians

        // Create the paddles
        var paddle1 = {
            x: 25,
            y: 150,
            width: 20,
            height: 100,
            score: 0,
            state: PADDLE_STOPPED
        };

        var paddle2 = {
            x: 555,
            y: 150,
            width: 20,
            height: 100,
            score: 0,
            state: PADDLE_STOPPED
        };

        // Create the ball
        var ball = {
            x: 300,
            x1: 300,
            y: 200,
            y1: 200,
            width: 20,
            height: 20,
            radius: 10,
            speed: 1,
            dx: 2,
            dy: 2
        };

        // Start the game loop
        function loop() {

            // Move the ball
            ball.x += ball.dx;
            ball.y += ball.dy;

            // Move the paddles
            if (paddle1.state == PADDLE_UP) {
                paddle1.y -= 10;
                paddle1.state = PADDLE_STOPPED;
            } else if (paddle1.state == PADDLE_DOWN) {
                paddle1.y += 10;
                paddle1.state = PADDLE_STOPPED;
            }

            if (paddle2.state == PADDLE_UP) {
                paddle2.y -= 10;
                paddle2.state = PADDLE_STOPPED;
            } else if (paddle2.state == PADDLE_DOWN) {
                paddle2.y += 10;
                paddle2.state = PADDLE_STOPPED;
            }

            // Check for collisions
            if (ball.x < 0) {
                // Ball hit the wall
                paddle1.score += 1;
                ball.dx *= -1;
            }

            // Check for collisions
            if (ball.x + ball.width > canvas.width) {
                // Ball hit the wall
                paddle2.score += 1;
                ball.dx *= -1;
            }

            if (ball.y < 0 || ball.y + ball.height > canvas.height) {
                // Ball hit the top or bottom of the screen
                ball.dy *= -1;
            }

            if (ball.x + ball.width >= paddle1.x && ball.x <= paddle1.x + paddle1.width && ball.y + ball.height >= paddle1.y && ball.y <= paddle1.y + paddle1.height) {
                // Ball hit the left paddle
                if (ball.dy >= 0 && ball.y + ball.height >= paddle1.y) {
                    ball.dy *= -1;
                } else if (ball.dy <= 0 && ball.y <= paddle1.y + paddle1.height) {
                    ball.dy *= -1;
                }
                ball.dx *= -1;
            }

            if (ball.x + ball.width >= paddle2.x && ball.x <= paddle2.x + paddle2.width && ball.y + ball.height >= paddle2.y && ball.y <= paddle2.y + paddle2.height) {
                // Ball hit the right paddle
                if (ball.dy >= 0 && ball.y + ball.height >= paddle2.y) {
                    ball.dy *= -1;
                } else if (ball.dy <= 0 && ball.y <= paddle2.y + paddle2.height) {
                    ball.dy *= -1;
                }
                ball.dx *= -1;
            }

            // Clear the canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw the paddles
            ctx.fillStyle = "white";
            ctx.fillRect(paddle1.x, paddle1.y, paddle1.width, paddle1.height);
            ctx.fillRect(paddle2.x, paddle2.y, paddle2.width, paddle2.height);

            // Draw the ball
            ctx.fillStyle = "red";
            ctx.fillRect(ball.x, ball.y, ball.width, ball.height);

            // Draw the scores
            ctx.fillStyle = "white";
            ctx.font = "bold 20px Arial";
            ctx.fillText(paddle1.score, paddle1.x + 10, 20);
            ctx.fillText(paddle2.score, paddle2.x + 10, 20);

            // Request a redraw
            requestAnimationFrame(loop);
        }

        // Add event listeners for key presses
        document.addEventListener("keydown", function (event) {
            // Handle key press for paddle1
            if (paddle1.state = PADDLE_STOPPED) {
                if (event.code == "KeyW") {
                    paddle1.state = PADDLE_UP;
                } else if (event.code == "KeyS") {
                    paddle1.state = PADDLE_DOWN;
                }
            }

            // Handle key press for paddle2
            if (paddle2.state == PADDLE_STOPPED) {
                if (event.code == "ArrowUp") {
                    paddle2.state = PADDLE_UP;
                } else if (event.code == "ArrowDown") {
                    paddle2.state = PADDLE_DOWN;
                }
            }
        });

        // Start the game
        var frame = requestAnimationFrame(loop);
    </script>
</body>

</html>
